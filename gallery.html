<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gallery â€” Albums</title>
    <link href="styles\navBarStyle.css" rel="stylesheet">
    <link href="styles\siteNotice.css" rel="stylesheet">
    <link href="styles\galleryStyle.css" rel="stylesheet">
  </head>
  <body>

    <header class="topbar">
        <div class="wrap topbar-row">
          <div class="brand" style="gap:10px;">
            <span class="login">DYLAN VAL</span>
          </div>
    
          <div class="nav-wrap">
                <input id="nav-toggle" type="checkbox" aria-hidden="true">
                <label class="hambtn" for="nav-toggle" aria-label="Toggle menu">
                <span class="hamburger"><span></span></span>
                </label>
        
                <nav class="wrap-in">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a class="active" href="#">Gallery</a></li>
                </ul>
                </nav>
            </div>
        </div>
    </header>

    <div class="site-notice">
    ðŸš§ This website is still under development. Some features may not work yet. ðŸš§
    </div>


    <div class="container">
      <header class="page" aria-label="Gallery header">
        <div>
          <h1>Gallery</h1>
          <div class="subtle" id="album-count" aria-live="polite">4 albums</div>
        </div>
        <div class="controls" role="group" aria-label="Search and sort">
          <label class="control" for="search">
            <span class="sr-only">Search</span>
            <input id="search" type="search" placeholder="Search albums..." autocomplete="off" />
          </label>
          <label class="control" for="sort">
            <span class="sr-only">Sort</span>
            <select id="sort" aria-label="Sort albums">
              <option value="newest">Newest</option>
              <option value="oldest">Oldest</option>
              <option value="az">A â†’ Z</option>
              <option value="za">Z â†’ A</option>
            </select>
          </label>
        </div>
      </header>

      <main class="grid" id="grid" aria-live="polite">



        <article class="album-card" 
         data-title="Snowdon" 
         data-date="2024-09-27" 
         data-img="images\gallery\covers\cribGoch.jpg" 
         data-href="/albums/moel-siabod">
            <div class="cover">
                <span class="badge">Album</span>
                <div class="meta">
                <h3 class="title"></h3>
                <div class="date"><time></time></div>
                </div>
                <a class="album-link"></a>
            </div>
        </article>


        <article class="album-card" 
         data-title="Cairn Gorm" 
         data-date="2025-02-02" 
         data-img="images\gallery\covers\cairnGorm.jpg" 
         data-href="/albums/moel-siabod">
            <div class="cover">
                <span class="badge">Album</span>
                <div class="meta">
                <h3 class="title"></h3>
                <div class="date"><time></time></div>
                </div>
                <a class="album-link"></a>
            </div>
        </article>


        <article class="album-card" 
         data-title="Moel Siabod" 
         data-date="2025-02-15" 
         data-img="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1600&auto=format&fit=crop" 
         data-href="/albums/moel-siabod">
            <div class="cover">
                <span class="badge">Album</span>
                <div class="meta">
                <h3 class="title"></h3>
                <div class="date"><time></time></div>
                </div>
                <a class="album-link"></a>
            </div>
        </article>

        <article class="album-card" 
         data-title="Dorset" 
         data-date="2025-09-21" 
         data-img="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1600&auto=format&fit=crop" 
         data-href="/albums/moel-siabod">
            <div class="cover">
                <span class="badge">Album</span>
                <div class="meta">
                <h3 class="title"></h3>
                <div class="date"><time></time></div>
                </div>
                <a class="album-link"></a>
            </div>
        </article>
        <article class="album-card" 
         data-title="Pembroke" 
         data-date="2025-07-03" 
         data-img="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1600&auto=format&fit=crop" 
         data-href="/albums/moel-siabod">
            <div class="cover">
                <span class="badge">Album</span>
                <div class="meta">
                <h3 class="title"></h3>
                <div class="date"><time></time></div>
                </div>
                <a class="album-link"></a>
            </div>
        </article>
        <article class="album-card" 
         data-title="Newquay" 
         data-date="2025-07-13" 
         data-img="https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=1600&auto=format&fit=crop" 
         data-href="/albums/moel-siabod">
            <div class="cover">
                <span class="badge">Album</span>
                <div class="meta">
                <h3 class="title"></h3>
                <div class="date"><time></time></div>
                </div>
                <a class="album-link"></a>
            </div>
        </article>
        <article class="album-card" 
         data-title="Roaches" 
         data-date="2025-06-18" 
         data-img="images\gallery\covers\roaches.jpg" 
         data-href="/albums/moel-siabod">
            <div class="cover">
                <span class="badge">Album</span>
                <div class="meta">
                <h3 class="title"></h3>
                <div class="date"><time></time></div>
                </div>
                <a class="album-link"></a>
            </div>
        </article>
        <article class="album-card" 
         data-title="Val Thorens" 
         data-date="2025-03-29" 
         data-img="images\gallery\covers\valT.jpg" 
         data-href="/albums/moel-siabod">
            <div class="cover">
                <span class="badge">Album</span>
                <div class="meta">
                <h3 class="title"></h3>
                <div class="date"><time></time></div>
                </div>
                <a class="album-link"></a>
            </div>
        </article>

      </main>
    </div>

    <script>
        document.querySelectorAll('.album-card').forEach(card => {
        const title = card.dataset.title;
        const date = card.dataset.date;
        const img = card.dataset.img;
        const href = card.dataset.href;

        // fill title
        card.querySelector('.title').textContent = title;

        // fill date
        const timeEl = card.querySelector('time');
        timeEl.dateTime = date;
        timeEl.textContent = new Date(date).toLocaleDateString(undefined, {
            year: 'numeric',
            month: 'short',
            day: '2-digit'
        });

        // set image
        const cover = card.querySelector('.cover');
        const imgEl = document.createElement('img');
        imgEl.src = img;
        imgEl.alt = `${title} cover`;
        imgEl.loading = 'lazy';
        cover.prepend(imgEl); // put it inside the cover

        // set link
        const link = card.querySelector('.album-link');
        link.href = href;
        link.setAttribute('aria-label', `Open album â€” ${title}`);
        });

      // --- Utilities ---
      const formatDate = (d) => {
        const date = new Date(d);
        if (Number.isNaN(date.getTime())) return "Unknown date";
        return date.toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: '2-digit' });
      };

      // --- Elements ---
      const grid = document.getElementById('grid');
      const search = document.getElementById('search');
      const sort = document.getElementById('sort');
      const count = document.getElementById('album-count');

      // Prepare initial state
      let cards = Array.from(grid.querySelectorAll('.album-card'));

      const apply = () => {
        const q = search.value.trim().toLowerCase();
        let visible = cards.filter(card => {
          const t = card.dataset.title.toLowerCase();
          const d = formatDate(card.dataset.date).toLowerCase();
          return !q || t.includes(q) || d.includes(q);
        });

        const cmp = (a, b) => {
          if (sort.value === 'az') return a.dataset.title.localeCompare(b.dataset.title);
          if (sort.value === 'za') return b.dataset.title.localeCompare(a.dataset.title);
          const ad = new Date(a.dataset.date).getTime();
          const bd = new Date(b.dataset.date).getTime();
          return sort.value === 'newest' ? bd - ad : ad - bd;
        };
        visible.sort(cmp);

        // Paint
        grid.innerHTML = '';
        visible.forEach(card => {
          // ensure text dates are formatted once on load/update
          const timeEl = card.querySelector('time');
          const iso = card.dataset.date;
          timeEl.dateTime = iso;
          timeEl.textContent = formatDate(iso);
          grid.appendChild(card);
        });

        count.textContent = `${visible.length} ${visible.length === 1 ? 'album' : 'albums'}`;
      };

      search.addEventListener('input', apply);
      sort.addEventListener('change', apply);
      // Initial render
      apply();
    </script>
  </body>
</html>
